!function(e){"use strict";e(function(){var t=function(){e("#evf-modal-select-form").length&&(e("#evf-modal-select-form").get(0).selectedIndex=0,e("#evf-modal-checkbox-title, #evf-modal-checkbox-description").prop("checked",!1)),e("#evf-modal-backdrop, #evf-modal-wrap").css("display","none"),e(document.body).removeClass("modal-open")};e(document).on("click",".evf-insert-form-button",function(t){t.preventDefault(),e("#evf-modal-backdrop, #evf-modal-wrap").css("display","block"),e(document.body).addClass("modal-open")}),e(document).on("click","#evf-modal-close, #evf-modal-cancel a",function(e){e.preventDefault(),t()}),e(document).on("click","#evf-modal-submit",function(o){o.preventDefault();var a;a='[everest_form id="'+e("#evf-modal-select-form").val()+'"',e("#evf-modal-checkbox-title").is(":checked")&&(a+=' title="true"'),e("#evf-modal-checkbox-description").is(":checked")&&(a+=' description="true"'),a+="]",wp.media.editor.insert(a),t()});({$setup_form:e("form.everest-forms-setup"),init:function(){this.title_focus(),this.$setup_form.on("click",".evf-template-select",this.template_select),e(document.body).on("keypress",".everest-forms-setup-form-name input",this.input_keypress)},title_focus:function(){setTimeout(function(){e("#everest-forms-setup-name").focus()},100)},template_select:function(t){t.preventDefault();var o=e(this),a=e("#everest-forms-setup-name"),n=o.data("template"),s=o.data("template-name-raw"),c="";if(!o.parent().hasClass("loading")){c=a.val()?a.val():s,o.parent().addClass("loading");var r={title:c,action:"everest_forms_create_form",template:n,security:everest_add_form_params.create_form_nonce};e.post(everest_add_form_params.ajax_url,r,function(e){e.success?(o.parent().removeClass("loading"),window.location.href=e.data.redirect):window.console.log(e)}).fail(function(e){window.console.log(e.responseText)})}},input_keypress:function(e){if(13===(e.keyCode||e.which)&&"input"===e.target.tagName.toLowerCase())return e.preventDefault(),!1}}).init()})}(jQuery);